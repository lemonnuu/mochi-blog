<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Node 基础入门</title>
    <meta name="description" content="Mochi's personal blog.">
    <link rel="preload stylesheet" href="/mochi-blog/assets/style.39008197.css" as="style">
    <link rel="modulepreload" href="/mochi-blog/assets/chunks/VPAlgoliaSearchBox.ce9b5026.js">
    <link rel="modulepreload" href="/mochi-blog/assets/chunks/symbol.3b47a695.js">
    <link rel="modulepreload" href="/mochi-blog/assets/app.97f575c7.js">
    <link rel="modulepreload" href="/mochi-blog/assets/POSTS_node_001_node-basic.md.c6baefeb.lean.js">
    
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><!--[--><div class="sidebar-nav-toggle" style="--117a3cb0:#242424;--f8185b16:#ffffff;" data-v-9314ca4e><svg class="icon-font icon-arrow" aria-hidden="true" data-v-9314ca4e><use xlink:href="#icon-left-arrow" data-v-9314ca4e></use></svg></div><div class="Layout" style="--117a3cb0:#242424;--f8185b16:#ffffff;" data-v-9314ca4e data-v-2f5187ef><!--[--><!--]--><!--[--><span tabindex="-1" data-v-d053d77d></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-d053d77d> Skip to content </a><!--]--><!----><header class="VPNav no-sidebar" data-v-2f5187ef data-v-1f1b5af5><div class="VPNavBar" data-v-1f1b5af5 data-v-9b1f2697><div class="container" data-v-9b1f2697><div class="VPNavBarTitle" data-v-9b1f2697 data-v-aa73a246><a class="title" href="/mochi-blog/" data-v-aa73a246><!--[--><!--]--><!--[--><!--[--><!--[--><img class="VPImage dark logo" src="/mochi-blog/logo-dark.svg" alt data-v-57b33494><!--]--><!--[--><img class="VPImage light logo" src="/mochi-blog/logo-light.svg" alt data-v-57b33494><!--]--><!--]--><!--]--><!----><!--[--><!--]--></a></div><div class="content" data-v-9b1f2697><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9b1f2697 style="--4c44fa30:&#39;Meta&#39;;"><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9b1f2697 data-v-0477f96b><span id="main-nav-aria-label" class="visually-hidden" data-v-0477f96b>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-0477f96b data-v-ddb35af0><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-ddb35af0><span class="text" data-v-ddb35af0><!----> Notes <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-ddb35af0><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-ddb35af0><div class="VPMenu" data-v-ddb35af0 data-v-4a3eaef0><div class="items" data-v-4a3eaef0><!--[--><!--[--><div class="VPMenuLink" data-v-4a3eaef0 data-v-047fc2b1><a class="VPLink link" href="/mochi-blog/_NOTES/Build%20Tools/rollup/01_pre.html" data-v-047fc2b1 data-v-bcac21e9><!--[-->Build Tools<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-0477f96b data-v-ddb35af0><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-ddb35af0><span class="text" data-v-ddb35af0><!----> Posts <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-ddb35af0><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-ddb35af0><div class="VPMenu" data-v-ddb35af0 data-v-4a3eaef0><div class="items" data-v-4a3eaef0><!--[--><!--[--><div class="VPMenuLink" data-v-4a3eaef0 data-v-047fc2b1><a class="VPLink link" href="/mochi-blog/timeline.html" data-v-047fc2b1 data-v-bcac21e9><!--[-->Timeline<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-4a3eaef0 data-v-047fc2b1><a class="VPLink link" href="/mochi-blog/category.html" data-v-047fc2b1 data-v-bcac21e9><!--[-->Categories<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-4a3eaef0 data-v-047fc2b1><a class="VPLink link" href="/mochi-blog/tag.html" data-v-047fc2b1 data-v-bcac21e9><!--[-->Tags<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9b1f2697 data-v-69ca162b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-69ca162b data-v-344adc65 data-v-fc48a6d9><span class="check" data-v-fc48a6d9><span class="icon" data-v-fc48a6d9><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-344adc65><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-344adc65><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9b1f2697 data-v-ca5eb9c8 data-v-238b06a8><!--[--><a class="VPSocialLink" href="https://github.com/lemonnuu" target="_blank" rel="noopener" data-v-238b06a8 data-v-ab654f60><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9b1f2697 data-v-3401da01 data-v-ddb35af0><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-ddb35af0><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-ddb35af0><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-ddb35af0><div class="VPMenu" data-v-ddb35af0 data-v-4a3eaef0><!----><!--[--><!--[--><!----><div class="group" data-v-3401da01><div class="item appearance" data-v-3401da01><p class="label" data-v-3401da01>Appearance</p><div class="appearance-action" data-v-3401da01><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-3401da01 data-v-344adc65 data-v-fc48a6d9><span class="check" data-v-fc48a6d9><span class="icon" data-v-fc48a6d9><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-344adc65><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-344adc65><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-3401da01><div class="item social-links" data-v-3401da01><div class="VPSocialLinks social-links-list" data-v-3401da01 data-v-238b06a8><!--[--><a class="VPSocialLink" href="https://github.com/lemonnuu" target="_blank" rel="noopener" data-v-238b06a8 data-v-ab654f60><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9b1f2697 data-v-02959e0f><span class="container" data-v-02959e0f><span class="top" data-v-02959e0f></span><span class="middle" data-v-02959e0f></span><span class="bottom" data-v-02959e0f></span></span></button></div></div></div><!----></header><!----><!----><div class="VPContent" id="VPContent" data-v-2f5187ef data-v-6edf2abd><div class="VPDoc has-aside" data-v-6edf2abd data-v-b6472854><div class="container" data-v-b6472854><div class="aside" data-v-b6472854><div class="aside-curtain" data-v-b6472854></div><div class="aside-container" data-v-b6472854><div class="aside-content" data-v-b6472854><div class="VPDocAside" data-v-b6472854 data-v-772dce49><!--[--><!--[--><!--[--><!--[--><div class="show-eyes aside-top" data-v-9314ca4e><svg class="icon-font icon-eye" aria-hidden="true" data-v-9314ca4e><use xlink:href="#icon-close-eyes" data-v-9314ca4e></use></svg></div><!--]--><!--]--><!--]--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-772dce49 data-v-d36b5956><div class="content" data-v-d36b5956><div class="outline-marker" data-v-d36b5956></div><div class="outline-title" data-v-d36b5956>大纲</div><nav aria-labelledby="doc-outline-aria-label" data-v-d36b5956><span class="visually-hidden" id="doc-outline-aria-label" data-v-d36b5956> Table of Contents for current page </span><ul class="root" data-v-d36b5956 data-v-0cff718e><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-772dce49></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-b6472854><div class="content-container" data-v-b6472854><!--[--><!--]--><main class="main" data-v-b6472854><div style="position:relative;" class="vp-doc _mochi-blog__POSTS_node_001_node-basic" data-v-b6472854><div><h1 id="node-基础入门" tabindex="-1">Node 基础入门 <a class="header-anchor" href="#node-基础入门" aria-hidden="true">#</a></h1><p>Node.js 是一个可以让 JavaScript 运行在操作系统上的运行环境。</p><h2 id="安装-node" tabindex="-1">安装 Node <a class="header-anchor" href="#安装-node" aria-hidden="true">#</a></h2><ul><li><a href="https://nodejs.org/en/" target="_blank" rel="noreferrer">官网安装</a></li><li><a href="https://github.com/coreybutler/nvm-windows" target="_blank" rel="noreferrer">nvm 安装</a>(推荐)</li></ul><h2 id="运行-node-脚本" tabindex="-1">运行 node 脚本 <a class="header-anchor" href="#运行-node-脚本" aria-hidden="true">#</a></h2><p>运行 node 脚本有两种方式：</p><ol><li>显式告诉 shell 使用 node 运行脚本, 即 <code>node xxx.js</code></li><li>使用 shebang 在文件第一行写入执行环境, 告诉操作系统使用哪个解释器来运行脚本</li></ol><p>shebang 语法由 <code>#!</code> 开头, 其后可以有一个或数个空白字符, 为解释器的绝对路径, 用于调用解释器。</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#! /usr/bin/node</span></span>
<span class="line"></span></code></pre></div><p>并非所有操作系统的 bin 文件夹中都有 node, 但都应该有 env。可以告诉操作系统使用 node 为参数运行 env：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight has-highlighted-lines"><code><span class="line highlighted"><span style="color:#676E95;font-style:italic;">#! /usr/bin/env node</span></span>
<span class="line"></span></code></pre></div><p>需要注意的是, 要使用 shebang, 此文件应该具有可执行权限, Linux 可使用 chmod 修改文件权限：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">u+x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">xxx.js</span></span>
<span class="line"></span></code></pre></div><h2 id="node-js-模块化" tabindex="-1">Node.js 模块化 <a class="header-anchor" href="#node-js-模块化" aria-hidden="true">#</a></h2><p>Node.js 默认使用 CommonJS 模块化规范, module 对象上最重要的两个属性分别是 <code>id</code> 和 <code>exports</code>, this 默认指向 <code>module.exports</code>。<code>module.paths</code> 是 require 寻址路径。</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">module</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">this</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">this</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/* output:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">Module {</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  id: &#39;.&#39;,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  path: &#39;F:\\Mochi\\mochi-learn\\01_node-basic&#39;,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  exports: {},</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  parent: null,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  filename: &#39;F:\\Mochi\\mochi-learn\\01_node-basic\\004_modular.js&#39;,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  loaded: false,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  children: [],</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  paths: [</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    &#39;F:\\Mochi\\mochi-learn\\01_node-basic\\node_modules&#39;,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    &#39;F:\\Mochi\\mochi-learn\\node_modules&#39;,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    &#39;F:\\Mochi\\node_modules&#39;,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    &#39;F:\\node_modules&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  ]</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">{}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">true</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"></span></code></pre></div><h2 id="npm" tabindex="-1">npm <a class="header-anchor" href="#npm" aria-hidden="true">#</a></h2><p>npm 是 Node.js 标准的软件包管理器。</p><p>当使用 npm 安装软件包时, 可以执行两种安装类型：</p><ul><li>全局安装</li><li>本地安装</li></ul><p>本地安装的软件包会被安装到当前文件树中的 node_modules 子文件夹下。<span class="text-red-400">全局安装的软件包确切位置可使用 <code>npm root -g</code> 查看。</span></p><h3 id="npm-依赖与开发依赖" tabindex="-1">npm 依赖与开发依赖 <a class="header-anchor" href="#npm-依赖与开发依赖" aria-hidden="true">#</a></h3><p>开发依赖是仅用于开发的软件包, 在生产环境并不需要, 如测试的软件包、webpack、Babel 等。</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cowsay</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--save</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 等同于</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cowsay</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-S</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">webpack</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--save-dev</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 等同于</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">webpack</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-D</span></span>
<span class="line"></span></code></pre></div><p><code>-S</code> 是 <code>--save</code> 的缩写, <code>-D</code> 是 <code>--save-dev</code> 的缩写。</p><p>可以使用 <code>@</code> 语法来安装指定版本的软件包。</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">npm install cowsay@</span><span style="color:#F78C6C;">1.3</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span></code></pre></div><h3 id="如何使用-npm-安装的软件包" tabindex="-1">如何使用 npm 安装的软件包 <a class="header-anchor" href="#如何使用-npm-安装的软件包" aria-hidden="true">#</a></h3><p>软件包分为两种, 一种是普通的库, 另一种是可执行文件, 也就是我们常说的 cli。</p><p>这两种软件包在安装时都会安装到本地的 node_modules 文件夹中, 不同的是, 如果是可执行文件还会把执行命令放入 <code>node_modules/.bin/</code> 目录下。下面是普通库文件的使用方式：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> _ </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">lodash</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>那如何执行 <code>node_modules/.bin/</code> 的可执行文件呢？有三种方式：</p><ol><li>直接终端输入可执行文件地址, 如 <code>.\node_modules\.bin\cowsay hello world!</code></li><li>通过 <code>npx</code> 执行, 如 <code>npx npx cowsay hello world!</code></li><li>在 package.json 文件中配置 scripts 执行, 如 <code>&quot;scripts&quot;: {&quot;test&quot;: &quot;cowsay hello world!&quot;}</code>, <code>npm test</code></li></ol><h2 id="package-json" tabindex="-1">package.json <a class="header-anchor" href="#package-json" aria-hidden="true">#</a></h2><p>package.json 文件是项目的清单, 它可以做很多完全互不相关的事情。例如, 它是用于工具的配置中心, 也是 npm 和 yarn 存储所有已安装软件包名称和版本的地方。</p><h3 id="软件包版本" tabindex="-1">软件包版本 <a class="header-anchor" href="#软件包版本" aria-hidden="true">#</a></h3><p>在 dependencies 或 devDependencies 中通常类似以下的版本号 <code>^0.13.0</code>、<code>~0.13.0</code> 或 <code>0.13.0</code>。它们是什么意思呢？</p><p>这些符号使用了 semver(语义版本控制), 指定了软件包能接受的更新。所有的版本都有 3 个数字, 第一个是主版本, 第二个是次版本, 第三个是补丁版本。</p><ul><li>如果以 <code>^</code> 开头, 表示接受『主版本不变更即可』的更新。如 <code>^0.13.0</code>, 会更新到主版本为 0 的最新版本, 如 <code>0.new.new</code></li><li>如果以 <code>~</code> 开头, 表示『只接受补丁版本的更新』。如 <code>~0.13.0</code>, 会更新到主版本为 0, 次版本为 13 的最新补丁版本, 如 <code>0.13.new</code></li><li>如果没有任何符号, 表示『只接受确切版本, 不接受更新依赖』。如 <code>0.13.0</code> 只会安装 <code>0.13.0</code> 版本。</li><li>如果是 <code>latest</code>, 表示更新到最新的依赖</li></ul><h3 id="package-lock-json" tabindex="-1">package-lock.json <a class="header-anchor" href="#package-lock-json" aria-hidden="true">#</a></h3><p>在知道了软件包版本控制的方式后, 很容易知道这样是存在缺陷的。</p><p>因为 node_modules 通常不会被提交至 git, 从 git 拉下来执行 <code>npm install</code> 后安装的依赖可能和开发时的依赖不同, 可能是次版本的更新, 也可能是补丁版本的更新。</p><p>如果软件包开发作者严格遵循语义版本控制, 这不会有什么问题。但, 这是不可控的, 如果次版本或补丁版本含有不兼容的更新, 那就会造成项目运行失败！</p><p>在 npm5 之后, npm 引入了 package-lock.json 文件, package-lock.josn 文件也会提交至 git。它会固化当前安装的每个软件包版本, 当运行 <code>npm install</code> 时, 如果项目含有 package-lock.json 文件, 将安装固化版本, 如果没有则以 package.json 为准安装依赖, 然后生成 package.json 文件。</p><p>当运行 <code>npm update</code> 时, <code>package-lock.json</code> 文件中的依赖版本会被更新。</p><h3 id="查看-npm-包安装版本" tabindex="-1">查看 npm 包安装版本 <a class="header-anchor" href="#查看-npm-包安装版本" aria-hidden="true">#</a></h3><p>若要查看所有已安装的 npm 软件包及版本, 可以 <code>npm list --depth=0</code>, depth 参数表示要展示的层级。</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">list</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--depth=0</span></span>
<span class="line"></span></code></pre></div><p>若要查看软件包在 npm 仓库上最新的可用版本, 可以运行：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">package_name</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">version</span></span>
<span class="line"></span></code></pre></div><p>若要查看软件包在 npm 仓库上所有可用版本, 可以运行：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">package_name</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">versions</span></span>
<span class="line"></span></code></pre></div><h2 id="process-核心模块" tabindex="-1">process 核心模块 <a class="header-anchor" href="#process-核心模块" aria-hidden="true">#</a></h2><h3 id="环境变量" tabindex="-1">环境变量 <a class="header-anchor" href="#环境变量" aria-hidden="true">#</a></h3><p>Node.js 的 <code>process</code> 核心模块提供了 <code>env</code> 属性, 该属性承载了在启动进程时设置的所有环境变量。</p><p><code>process</code> 核心模块不需要被 &quot;require&quot;, 它是自动可用的。这是访问 NODE_ENV 环境变量的示例, 该环境变量默认情况下被设置为 <code>&#39;development&#39;</code>。</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">process</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">env</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">NODE_ENV</span></span>
<span class="line"></span></code></pre></div><p>在脚本运行之前可将其设置为 <code>&#39;production&#39;</code>, 告诉 Node 这是生产环境。可以以相同的方式访问设置任何自定义的环境变量。</p><h3 id="命令行参数" tabindex="-1">命令行参数 <a class="header-anchor" href="#命令行参数" aria-hidden="true">#</a></h3><p>当使用以下命令调用 Node.js 应用程序时, 可以传入任意数量的参数：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">node</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">xxx.js</span></span>
<span class="line"></span></code></pre></div><p>参数可以是独立的, 也可以具有键和值。例如：<code>node xxx.js name</code> 或 <code>node xxx.js name=abc</code></p><p>获取命令行参数值的方式还是使用 Node.js 内置的 <code>process</code> 核心模块, 它公开了 <code>argv</code> 属性, 该属性是一个包含所有命令行调用参数的数组。</p><ul><li><span class="text-red-400">第一项是 node 命令的完整路径</span></li><li><span class="text-red-400">第二项是正被执行的文件完整路径</span></li><li><span class="text-red-400">其它所有参数从第三项位置开始</span></li></ul><p>下面是执行 <code>node xxx.js ---name=abc</code> 后, 其 <code>process.argv</code> 的值：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">D:</span><span style="color:#A6ACCD;">\\</span><span style="color:#C3E88D;">nvm install</span><span style="color:#A6ACCD;">\\</span><span style="color:#C3E88D;">node install</span><span style="color:#A6ACCD;">\\</span><span style="color:#C3E88D;">node.exe</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">F:</span><span style="color:#A6ACCD;">\\</span><span style="color:#C3E88D;">Mochi</span><span style="color:#A6ACCD;">\\</span><span style="color:#C3E88D;">mochi-learn</span><span style="color:#A6ACCD;">\\</span><span style="color:#C3E88D;">01_node-basic</span><span style="color:#A6ACCD;">\\</span><span style="color:#C3E88D;">test.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">--name=abc</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"></span></code></pre></div><p>如需对命令行参数进行解析, 最好的方法是采用第三方库, 如 <a href="https://www.npmjs.com/package/minimist" target="_blank" rel="noreferrer">minimist</a> 或 <a href="https://www.npmjs.com/package/commander" target="_blank" rel="noreferrer">commander</a>。</p><h2 id="命令行交互问答" tabindex="-1">命令行交互问答 <a class="header-anchor" href="#命令行交互问答" aria-hidden="true">#</a></h2><p>如何使 Node.js CLI 程序具有交互性？</p><p>从版本 7 开始, Node.js 提供了 <a href="https://nodejs.org/dist/latest-v18.x/docs/api/readline.html" target="_blank" rel="noreferrer">readline</a> 模块来执行以下操作：</p><p>每次一行地从可读流获取输入。(例如 <code>process.stdin</code> 流, 在 Node.js 程序执行期间该流就是终端输入)</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> readline </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">readline</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createInterface</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">input</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> process</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">stdin</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">output</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> process</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">stdout</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">readline</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">question</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">What&#39;s your name?</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">name</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">你好, </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">}`</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">readline</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// What&#39;s your name?Mochi</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Hello, Mochi</span></span>
<span class="line"></span></code></pre></div><p><a href="https://github.com/SBoudrias/Inquirer.js" target="_blank" rel="noreferrer">inquirer</a> 库提供了更完整更抽象的解决方案</p><h2 id="搭建-http-服务器" tabindex="-1">搭建 HTTP 服务器 <a class="header-anchor" href="#搭建-http-服务器" aria-hidden="true">#</a></h2><p>web 服务器就是启动了一个服务, 不停的监听这个端口上进来的 http 请求。</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> http </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> server </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> http</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createServer</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">req</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">res</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setHeader</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Access-Control-Allow-Origin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://127.0.0.1:5500</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">statusCode</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">200</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">end</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> port </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3000</span></span>
<span class="line"><span style="color:#A6ACCD;">server</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">listen</span><span style="color:#A6ACCD;">(port</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">\x1b</span><span style="color:#C3E88D;">[32m%s</span><span style="color:#A6ACCD;">\x1b</span><span style="color:#C3E88D;">[0m</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">服务运行在http://localhost:</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">port</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">上</span><span style="color:#89DDFF;">`</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>创建 HTTP 服务器需要引入 http 模块, 服务器被设置为在指定的 3000 端口进行监听, 当服务器准备就绪时, listen 的回调函数会被调用。</p><p><code>http.createServer()</code> 传入的回调函数会在每次接收请求时被执行, 回调函数的参数分别是 <code>request</code> 和 <code>response</code></p><ul><li>requset 提供了请求的详细信息。通过它可以访问请求头和请求的数据</li><li>response 用于构造要返回给客户端的数据</li></ul><p>注：<code>http.createServer()</code> 传入回调函数相当于 <code>http.on(&#39;request&#39;, (req, res) =&gt; {})</code>。</p><p>request 中最有用的信息包括 method 和 url, get 请求的参数包含在 url 中, 如果是 post 请求需要 <code>req.on(&#39;data&#39;, chunk =&gt; {})</code> 监听传输数据, 数据传输可能是多次的, <code>req.on(&#39;end&#39;, () =&gt; {})</code> 监听数据传输完成。</p><blockquote><p>In order to support the full spectrum of possible HTTP applications, the Node.js HTTP API is very low-level. It deals with stream handling and message parsing only. It parses a message into headers and body but it does not parse the actual headers or the body.</p></blockquote><p>需要注意的是 post 请求 body 请求体数据解析方式的不同, formdata 数据使用 querystring 模块的 parse 方法, JSON 字符串使用 JSON 处理。</p><p>response 可使用：</p><ol><li><code>res.statusCode</code> 设置响应状态码, <code>res.statusMessage</code> 设置响应状态信息</li><li><code>res.setHeader()</code> 设置响应头信息</li><li><code>res.write()</code> 写入响应信息</li><li><code>res.end()</code> 结束 http 请求, 也可将响应信息直接传入 <code>res.end()</code> 中</li></ol><p>需要注意的是, 直接向 <code>res.write()</code> 或 <code>res.end()</code> 传入中文的话, 客户端接收是解析不了的, 也就是会乱码, 原因是没有设置响应数据类型。</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setHeader</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Content-Type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">text/plain;charset=utf-8</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>如果响应信息储存在文件中, 需要需要 fs 模块的 readFile 读取文件内容, 再写入 res 中。</p><h3 id="node-发送-http-请求" tabindex="-1">node 发送 HTTP 请求 <a class="header-anchor" href="#node-发送-http-请求" aria-hidden="true">#</a></h3><p>node.js 发送 http 请求是使用 http 模块的 request 方法, 与创建 HTTP 服务器中 &quot;request&quot; 事件处理函数中的 res 一样, 这里的返回数据也需要监听 &quot;data&quot; 和 &quot;end&quot; 事件。</p><p>当然最简单的还是使用 axios 库。</p><h2 id="路径模块" tabindex="-1">路径模块 <a class="header-anchor" href="#路径模块" aria-hidden="true">#</a></h2><p><a href="http://dev.nodejs.cn/learn/the-nodejs-path-module" target="_blank" rel="noreferrer">path</a> 模块提供了许多非常实用的函数来处理操作系统文件路径。</p><ul><li><code>path.basename()</code> : 返回路径的最后一部分, 第二个参数可以过滤掉文件的扩展名</li><li><code>path.dirname()</code> : 返回路径的目录部分</li><li><code>path.extname()</code> : 返回路径的扩展名部分</li><li><code>path.isAbsolute()</code> : 如果是绝对路径，则返回 true</li><li><code>path.join()</code> : 连接路径的两个或多个部分</li><li><code>path.normalize()</code> : 当包含类似 <code>.</code>、<code>..</code> 或双斜杠等相对的说明符时，则尝试计算实际的路径：</li><li><code>path.parse()</code> : 解析对象的路径为组成其的片段, 如：<code>{root: &#39;/&#39;,dir: &#39;/users&#39;,base: &#39;test.txt&#39;,ext: &#39;.txt&#39;,name: &#39;test&#39;}</code></li><li><code>path.relative()</code> : 接受 2 个路径作为参数。 基于当前工作目录，返回从第一个路径到第二个路径的相对路径</li><li><code>path.resolve()</code> : 获得相对路径的绝对路径计算</li></ul><p><code>path.sep</code> 是路径段分隔符, 在 Windows 上是 <code>\</code>, 在 Linux/macOs 上是 <code>/</code>。<code>path.delimiter</code> 是路径定界符, 在 Windows 上是 <code>;</code>, 在 Linux/macOs 上是 <code>:</code>。</p><h2 id="文件系统模块" tabindex="-1">文件系统模块 <a class="header-anchor" href="#文件系统模块" aria-hidden="true">#</a></h2><p><a href="http://dev.nodejs.cn/learn/the-nodejs-fs-module" target="_blank" rel="noreferrer">fs</a> 模块提供了许多非常实用的函数来访问文件系统。</p><p>注：如果需要对文件/文件夹进行操作, 可以安装 <a href="https://www.npmjs.com/package/fs-extra" target="_blank" rel="noreferrer">fs-extra</a> 模块, 它是 fs 模块的直接替代品, 并在此之上提供了更多的功能。</p><ul><li><code>fs.access()</code> : 检查文件是否存在，以及 Node.js 是否有权限访问。</li><li><code>fs.appendFile()</code> : 追加数据到文件。如果文件不存在，则创建文件。</li><li><code>fs.chmod()</code> : 更改文件（通过传入的文件名指定）的权限。相关方法：<code>fs.lchmod()</code>、<code>fs.fchmod()</code>。</li><li><code>fs.chown()</code> : 更改文件（通过传入的文件名指定）的所有者和群组。相关方法：<code>fs.fchown()</code>、<code>fs.lchown()</code>。</li><li><code>fs.close()</code> : 关闭文件描述符。</li><li><code>fs.copyFile()</code> : 拷贝文件。</li><li><code>fs.createReadStream()</code> : 创建可读的文件流。</li><li><code>fs.createWriteStream()</code> : 创建可写的文件流。</li><li><code>fs.link()</code> : 新建指向文件的硬链接。</li><li><code>fs.mkdir()</code> : 新建文件夹。</li><li><code>fs.mkdtemp()</code> : 创建临时目录。</li><li><code>fs.open()</code> : 设置文件模式。</li><li><code>fs.readdir()</code> : 读取目录的内容。</li><li><code>fs.readFile()</code> : 读取文件的内容。相关方法：<code>fs.read()</code>。</li><li><code>fs.readlink()</code> : 读取符号链接的值。</li><li><code>fs.realpath()</code> : 将相对的文件路径指针（.、..）解析为完整的路径。</li><li><code>fs.rename()</code> : 重命名文件或文件夹。</li><li><code>fs.rmdir()</code> : 删除文件夹。</li><li><code>fs.stat()</code> : 返回文件（通过传入的文件名指定）的状态。相关方法：<code>fs.fstat()</code>、<code>fs.lstat()</code>。</li><li><code>fs.symlink()</code> : 新建文件的符号链接。</li><li><code>fs.truncate()</code> : 将传递的文件名标识的文件截断为指定的长度。相关方法：<code>fs.ftruncate()</code>。</li><li><code>fs.unlink()</code> : 删除文件或符号链接。</li><li><code>fs.unwatchFile()</code> : 停止监视文件上的更改。</li><li><code>fs.utimes()</code> : 更改文件（通过传入的文件名指定）的时间戳。相关方法：<code>fs.futimes()</code>。</li><li><code>fs.watchFile()</code> : 开始监视文件上的更改。相关方法：<code>fs.watch()</code>。</li><li><code>fs.writeFile()</code> : 将数据写入文件。相关方法：<code>fs.write()</code>。</li></ul><p>fs 所有的方法默认情况下都是异步的，但是在在后面加上 Sync 也可以同步地工作, 如 <code>fs.readFileSync()</code>。</p><p>可以借助 util 模块中的 promisify 方法对 fs 模块回调函数形式的异步方法转化为 promise 的形式：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> promisify </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">util</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> readFilePromisify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">promisify</span><span style="color:#A6ACCD;">(fs</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">readFile)</span></span>
<span class="line"></span></code></pre></div><p>Node.js 10 以上也有对 fs 模块 promise API 的支持, 如：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> fs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">fs/promises</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><h3 id="文件属性" tabindex="-1">文件属性 <a class="header-anchor" href="#文件属性" aria-hidden="true">#</a></h3><p>每个文件都带有一组详细信息, 可以使用 fs 模块提供的 <code>stat()</code> 方法查看。文件信息中常用的如下：</p><ul><li>stat.isFile() : 是否是文件</li><li>stat.isDirectory() : 是否是目录</li><li>stat.isSymbolicLink() : 是否符号链接</li><li>stat.size : 文件大小(字节为单位)</li></ul><h3 id="判断文件-文件夹是否存在" tabindex="-1">判断文件/文件夹是否存在 <a class="header-anchor" href="#判断文件-文件夹是否存在" aria-hidden="true">#</a></h3><p>可以使用 <code>fs.existsSync()</code> 判断文件/文件夹是否存在。</p><h3 id="读取文件" tabindex="-1">读取文件 <a class="header-anchor" href="#读取文件" aria-hidden="true">#</a></h3><p>Node.js 中读取文件最简单的方式是使用 <code>fs.readFile()</code> 方法, 向其传入文件路径、编码以及回调函数。</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">fs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readFile</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./fetch.html</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">utf-8</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">err</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">data</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">chalk</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">yellow</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><h3 id="写入-追加写入-文件" tabindex="-1">写入/追加写入 文件 <a class="header-anchor" href="#写入-追加写入-文件" aria-hidden="true">#</a></h3><p>Node.js 中写入文件最简单的方式是使用 <code>fs.writeFile()</code>, 如果文件不存在会先创建一个文件再写入。：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">fs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">writeFile</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./test.txt</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">内容</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">err</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>如果文件已经存在 <code>fs.writeFile()</code> 会替换文件的内容, 如果想要向文件中追加内容, 可以先读取出来再与追加内容拼接重新写入文件。</p><p>将内容追加到文件末尾的便捷方法是 <code>fs.appendFile()</code>：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">fs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">appendFile</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./test.txt</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">追加内容</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">err</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>写入文件方法都是在将全部内容写入文件之后才会将控制权返回给程序(在异步的版本中，这意味着执行回调)。在这种情况下，更好的选择是使用流写入文件的内容。</p><h3 id="删除文件" tabindex="-1">删除文件 <a class="header-anchor" href="#删除文件" aria-hidden="true">#</a></h3><p>可以使用 <code>fs.unlink()</code> 删除文件。</p><h3 id="创建新的文件夹" tabindex="-1">创建新的文件夹 <a class="header-anchor" href="#创建新的文件夹" aria-hidden="true">#</a></h3><p>可以使用 <code>fs.mkdir()</code> 或 <code>fs.mkdir()</code> 创建新的文件夹：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">fs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">existsSync</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./dir</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">fs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">existsSync</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./dir</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">fs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">mkdirSync</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./dir</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="重命名文件或文件夹" tabindex="-1">重命名文件或文件夹 <a class="header-anchor" href="#重命名文件或文件夹" aria-hidden="true">#</a></h3><p>可以使用 <code>fs.rename</code> 重命名文件或文件夹：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">fs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">renameSync</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./dir</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./newDir</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">err</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><h3 id="删除文件夹" tabindex="-1">删除文件夹 <a class="header-anchor" href="#删除文件夹" aria-hidden="true">#</a></h3><p>可以使用 <code>fs.rmdir()</code> 删除文件夹。</p><h3 id="读取目录内容" tabindex="-1">读取目录内容 <a class="header-anchor" href="#读取目录内容" aria-hidden="true">#</a></h3><p>可以使用 <code>fs.readdir()</code> 读取目录的内容, 注意『只是当前目录的文件和文件夹, 不包括孙子文件』, 并返回文件/文件夹的相对路径。</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (fs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">existsSync</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./dir</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">fs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readdir</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./dir</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">err</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">relativePath</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">relativePath</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-b6472854 data-v-de56c8ff><div class="edit-info" data-v-de56c8ff><div class="edit-link" data-v-de56c8ff><a class="VPLink link edit-link-button" href="https://github.com/lemonnuu/mochi-blog/blob/master/docs/_POSTS/node/001_node-basic.md" target="_blank" rel="noreferrer" data-v-de56c8ff data-v-bcac21e9><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-de56c8ff><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> 编辑此页<!--]--><!----></a></div><div class="last-updated" data-v-de56c8ff><p class="VPLastUpdated" data-v-de56c8ff data-v-888ad67c>上次更新时间: <time datetime="2023-01-08T07:41:22.000Z" data-v-888ad67c></time></p></div></div><!----></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter" data-v-2f5187ef data-v-beef4280><div class="container" data-v-beef4280><p class="message" data-v-beef4280>Mochi's personal blog.</p><p class="copyright" data-v-beef4280>Copyright © 2021-present Mochi</p></div></footer><!--[--><div class="fixed top-0 left-0 z-[-1] opacity-10" data-v-9314ca4e><!----></div><div id="goTop" class="hide-cat" data-v-9314ca4e style="--28faecc8:0;--0a79e8e7:rgb(8, 161, 213);" data-v-8362060a></div><!--]--></div><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"notes_build tools_esbuild_03_faqs.md\":\"a38ce177\",\"notes_build tools_esbuild_02_use.md\":\"96043400\",\"notes_build tools_esbuild_01_pre.md\":\"2c88648a\",\"notes_build tools_esbuild_index.md\":\"b99718ba\",\"notes_build tools_parcel_01_pre.md\":\"541d4332\",\"notes_build tools_rollup_01_pre.md\":\"7f8e08ba\",\"notes_build tools_rollup_02_use.md\":\"5248be5a\",\"notes_build tools_rollup_03_plugins.md\":\"20bd36e1\",\"notes_build tools_rollup_04_faqs.md\":\"2cfba9c3\",\"posts_node_003_npx.md\":\"674ccde6\",\"notes_build tools_rollup_index.md\":\"9627be54\",\"posts_node_001_node-basic.md\":\"c6baefeb\",\"posts_node_002_npm.md\":\"81add314\",\"posts_vitepress_002_vitepress-theme-mochi.md\":\"c4c196af\",\"posts_node_005_koa-basic.md\":\"a3b478b0\",\"posts_vue_001-source-optimization.md\":\"4c971988\",\"projects_index.md\":\"33d8f9bc\",\"category.md\":\"d81257d1\",\"index.md\":\"8d17d6eb\",\"origin.md\":\"5eea5856\",\"tag.md\":\"380f7e19\",\"posts_node_007_mongodb.md\":\"a0e1384b\",\"timeline.md\":\"9720de79\",\"posts_pits_001_deploy-gitpage-jekyll.md\":\"a1e220c2\",\"posts_pits_002ubuntu-install-mongodb.md\":\"a359d366\",\"posts_tips_001_color-consolelog.md\":\"66babc4f\",\"posts_vitepress_001_vitepress.md\":\"492cfa25\"}")</script>
    <script type="module" async src="/mochi-blog/assets/app.97f575c7.js"></script>
    
  </body>
</html>